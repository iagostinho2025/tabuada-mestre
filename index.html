<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Tabuada Mestre - Aprenda Brincando</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&family=Nunito:wght@400;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2563eb">
</head>
<body>

    <div id="app">
        
        <div id="tela-inicial">
            <div class="logo-area">
                <h1>‚úñÔ∏è Tabuada Mestre</h1>
                <p>Torne-se um g√™nio da matem√°tica!</p>
            </div>
            
            <div class="card-nivel-usuario">
                <span>üèÜ Seu Recorde:</span>
                <strong id="home-recorde">0 pts</strong>
            </div>

            <button id="btn-estudar" class="btn-menu azul">
                <span>üìñ Estudar Tabuadas</span>
                <small>Aprenda e pratique n√∫mero por n√∫mero</small>
            </button>

            <button id="btn-treino" class="btn-menu verde">
                <span>üéÆ Praticar Agora</span>
                <small>Perguntas aleat√≥rias (Sem tempo)</small>
            </button>
            
            <button id="btn-desafio" class="btn-menu roxo">
                <span>üî• Desafio Rel√¢mpago</span>
                <small>Corra contra o tempo</small>
            </button>

            <button id="btn-desempenho" class="btn-menu laranja">
                <span>üèÜ Meu Desempenho</span>
                <small>Veja sua evolu√ß√£o e recordes</small>
            </button>

            <div class="ad-banner-container">
                <p>Publicidade</p>
            </div>

            <div style="margin-top: 20px;">
                <button class="btn-link" onclick="alert('App Educativo v2.0 - MIB Digital')">Sobre o App</button>
            </div>
        </div>

        <div id="tela-estudo" class="tela oculto">
            <div class="header-tela">
                <button class="btn-voltar" data-destino="tela-inicial">‚¨Ö Menu</button>
                <h2 id="titulo-pagina-estudo">Modo Estudo</h2>
            </div>

            <div class="card-lousa-container">
                <div id="lousa-conteudo" class="grid-lousa-bipartida"></div>
            </div>

            <div class="area-seletores-container">
                <p>Selecione um n√∫mero:</p>
                <div id="lista-botoes-selecao" class="scroll-horizontal-seletores"></div>
            </div>

            <div class="area-acao-fixa">
                <button id="btn-acao-praticar-dinamico" class="btn-menu verde">
                    üéÆ Praticar Agora
                </button>
                <div class="ad-banner-container" style="margin-top: auto; margin-bottom: 16px;">
                    <p>Publicidade</p>
                </div>
            </div>

            <div id="painel-quiz-lousa" class="oculto" style="margin-top: 20px;">
                <div class="card-pergunta-focada">
                    <div class="pergunta-texto-grande" id="texto-pergunta-quiz">Prepare-se...</div>
                    <div id="opcoes-quiz-lousa" class="grid-opcoes-lateral"></div>
                    <div id="feedback-quiz" class="feedback-texto"></div>
                </div>
            </div>
        </div>

        <div id="tela-config-treino" class="tela oculto">
            <div class="header-tela">
                <button class="btn-voltar" data-destino="tela-inicial">‚¨Ö Menu</button>
                <h2>Personalizar</h2>
            </div>

            <div class="container-scroll" style="padding-bottom: 100px;">
                <h3 class="titulo-secao-config">Din√¢mica do Jogo</h3>
                <div class="grid-config-modo">
                    <button class="card-opcao-treino selecionado" id="opt-botoes" onclick="escolherModoInput('botoes')">
                        <div class="icon-grande">üîò</div>
                        <div class="texto-opt"><strong>Cl√°ssico</strong><small>M√∫ltipla Escolha</small></div>
                        <div class="check-icon">‚úî</div>
                    </button>
                    <button class="card-opcao-treino" id="opt-teclado" onclick="escolherModoInput('teclado')">
                        <div class="icon-grande">‚å®</div>
                        <div class="texto-opt"><strong>Teclado</strong><small>Digitar resposta</small></div>
                        <div class="check-icon">‚úî</div>
                    </button>
                    <button class="card-opcao-treino" id="opt-verdadeiro-falso" onclick="escolherModoInput('verdadeiro-falso')">
                        <div class="icon-grande">‚ö°</div>
                        <div class="texto-opt"><strong>R√°pido</strong><small>Verdade ou Falso</small></div>
                        <div class="check-icon">‚úî</div>
                    </button>
                    <button class="card-opcao-treino" id="opt-inverso" onclick="escolherModoInput('inverso')">
                        <div class="icon-grande">üß†</div>
                        <div class="texto-opt"><strong>Inverso</strong><small>Ache a conta</small></div>
                        <div class="check-icon">‚úî</div>
                    </button>
                </div>

                <h3 class="titulo-secao-config" style="margin-top: 30px;">Quantas perguntas?</h3>
                <div class="grid-config-qtd">
                    <button class="btn-qtd-redondo selecionado" id="qtd-10" onclick="escolherQtd(10)">10</button>
                    <button class="btn-qtd-redondo" id="qtd-20" onclick="escolherQtd(20)">20</button>
                    <button class="btn-qtd-redondo" id="qtd-50" onclick="escolherQtd(50)">50</button>
                    <button class="btn-qtd-redondo" id="qtd-inf" onclick="escolherQtd(Infinity)">‚àû</button>
                    <button class="btn-qtd-redondo" id="qtd-custom" onclick="escolherQtd('custom')">‚úèÔ∏è</button>
                </div>

                <div id="wrapper-slider" class="oculto">
                    <div class="container-slider-qtd">
                        <span class="label-slider">Quest√µes: <span id="valor-slider-display">30</span></span>
                        <input type="range" id="slider-qtd" min="1" max="100" value="30" oninput="atualizarValorSlider(this.value)">
                    </div>
                </div>
            </div>

            <div class="area-acao-fixa">
                <button id="btn-iniciar-treino-custom" class="btn-menu verde">üöÄ Come√ßar Jogo</button>
                <div class="ad-banner-container" style="margin-top: 0;"><p>Publicidade</p></div>
            </div>
        </div>

        <div id="tela-config-desafio" class="tela oculto">
            <div class="header-tela">
                <button class="btn-voltar" data-destino="tela-inicial">‚¨Ö Menu</button>
                <h2>Modo Desafio</h2>
            </div>

            <div class="container-scroll" style="padding-bottom: 100px;">
                <h3 class="titulo-secao-config">Escolha o Desafio</h3>
                <div class="grid-config-modo">
                    <button class="card-opcao-treino selecionado" id="opt-desafio-classico" onclick="escolherModoDesafio('classico')">
                        <div class="icon-grande">‚è±Ô∏è</div>
                        <div class="texto-opt"><strong>Cl√°ssico</strong><small>60 Segundos</small></div>
                        <div class="check-icon">‚úî</div>
                    </button>
                    <button class="card-opcao-treino" id="opt-desafio-morte" onclick="escolherModoDesafio('morte')">
                        <div class="icon-grande">üí£</div>
                        <div class="texto-opt"><strong>Morte S√∫bita</strong><small>5s ou Game Over</small></div>
                        <div class="check-icon">‚úî</div>
                    </button>
                    <button class="card-opcao-treino" id="opt-desafio-recarga" onclick="escolherModoDesafio('recarga')">
                        <div class="icon-grande">üîã</div>
                        <div class="texto-opt"><strong>Recarga</strong><small>Ganhe tempo extra</small></div>
                        <div class="check-icon">‚úî</div>
                    </button>
                    <button class="card-opcao-treino" id="opt-desafio-speedrun" onclick="escolherModoDesafio('speedrun')">
                        <div class="icon-grande">üèÅ</div>
                        <div class="texto-opt"><strong>Speedrun</strong><small>20 acertos r√°pidos</small></div>
                        <div class="check-icon">‚úî</div>
                    </button>
                </div>

                <h3 class="titulo-secao-config" style="margin-top: 30px;">Dificuldade</h3>
                <div class="grid-config-qtd">
                    <button class="btn-qtd-redondo selecionado" id="dif-facil" onclick="escolherDificuldade('facil')">üòÄ</button>
                    <button class="btn-qtd-redondo" id="dif-medio" onclick="escolherDificuldade('medio')">üòé</button>
                    <button class="btn-qtd-redondo" id="dif-dificil" onclick="escolherDificuldade('dificil')">üî•</button>
                </div>
				<div id="texto-explicacao-dificuldade">
                    <strong>M√©dio</strong>
                    Tabuadas do 2 ao 9 (multiplicando at√© 10). O padr√£o cl√°ssico.
                </div>
            </div>

            <div class="area-acao-fixa">
                <button id="btn-iniciar-desafio-custom" class="btn-menu roxo">üî• Iniciar Desafio</button>
                <div class="ad-banner-container" style="margin-top: 0;"><p>Publicidade</p></div>
            </div>
        </div>

        <div id="tela-desempenho" class="tela oculto">
            <div class="header-tela">
                <button class="btn-voltar" data-destino="tela-inicial">‚¨Ö Menu</button>
                <h2>Meu Progresso</h2>
            </div>

            <div class="container-scroll">
                
                <div class="stats-grid" style="margin-top: 10px;">
                    <div class="stat-card azul">
                        <span class="stat-valor" id="dash-total-jogos">0</span>
                        <span class="stat-label">Partidas</span>
                    </div>
                    <div class="stat-card verde">
                        <span class="stat-valor" id="dash-total-acertos">0</span>
                        <span class="stat-label">Acertos</span>
                    </div>
                    <div class="stat-card vermelho">
                        <span class="stat-valor" id="dash-pior-tabuada">-</span>
                        <span class="stat-label">Dificuldade</span>
                    </div>
                </div>

                <div class="card-grafico">
                    <div class="grafico-header">
                        <h3>Acertos por Tabuada</h3>
                        <div class="botoes-filtro">
                            <button class="btn-filtro" onclick="atualizarGrafico('ano')">Ano</button>
                            <button class="btn-filtro" onclick="atualizarGrafico('mes')">M√™s</button>
                            <button class="btn-filtro ativo" onclick="atualizarGrafico('dia')">Dia</button>
                        </div>
                    </div>
                    <div class="grafico-container">
                        <div id="container-barras" class="area-barras">
                            </div>
                    </div>
                </div>

                <h3 class="titulo-secao-config" style="margin-top: 25px;">Hist√≥rico de Jogos</h3>
                
                <div class="grid-botoes-historico">
                    <button class="btn-hist-modo roxo" onclick="verHistoricoModo('classico')">
                        ‚è±Ô∏è Cl√°ssico
                    </button>
                    <button class="btn-hist-modo laranja" onclick="verHistoricoModo('morte')">
                        üí£ Morte S√∫bita
                    </button>
                    <button class="btn-hist-modo verde" onclick="verHistoricoModo('recarga')">
                        üîã Recarga
                    </button>
                    <button class="btn-hist-modo azul" onclick="verHistoricoModo('speedrun')">
                        üèÅ Speedrun
                    </button>
                </div>

                <div id="painel-detalhes-historico" class="painel-detalhes oculto">
                    
                    <div class="header-detalhes">
                        <h4 id="titulo-modo-historico">Cl√°ssico</h4>
                        <button class="btn-fechar-mini" onclick="fecharHistoricoModo()">‚úï</button>
                    </div>

                    <div class="card-recorde-destaque">
                        <span>üèÜ Melhor Pontua√ß√£o</span>
                        <strong id="valor-recorde-modo">0 pts</strong>
                    </div>

                    <h5 style="margin: 15px 0 10px 0; color:var(--text-light)">√öltimas 10 Partidas:</h5>
                    
                    <div id="lista-historico-especifica" class="lista-simples">
                        </div>
                </div>

                <div style="margin-top: 40px; text-align: center;">
                    <button class="btn-link" onclick="limparTudo()" style="color: #ef4444; font-size: 0.8rem;">
                        üóëÔ∏è Apagar todo meu hist√≥rico
                    </button>
                </div>
                
                <div class="ad-banner-container" style="margin-bottom: 20px;">
                    <p>Publicidade</p>
                </div>
            </div>
        </div>

        <header id="header-jogo" class="oculto">
            <button id="btn-sair-jogo" class="btn-voltar">‚úï Sair</button>
            <div class="info-progresso">
                <span id="texto-contador" class="texto-contador">Quest√£o 1</span>
                <div id="container-barra-fixa" class="barra-fina-bg">
                    <div id="barra-fina-fill" class="barra-fina-fill"></div>
                </div>
            </div>
            <div style="display:flex; gap:10px; align-items:center;">
                <div id="timer-display" class="oculto" style="font-weight:bold; color:#ef4444">00:45</div>
                <div id="placar-display" class="badge-pontos">‚≠ê 0</div>
            </div>
            <div class="barra-progresso oculto" id="container-barra-tempo">
                <div id="barra-fill" style="width: 100%"></div>
            </div>
        </header>

        <main id="container-jogo" class="oculto">
            <div class="area-pergunta">
                </div>
            <div id="opcoes-resposta" class="grid-opcoes"></div>
        </main>

        <div id="tela-resultado" class="oculto">
            <div class="resultado-header">
                <h2>Resultado Final</h2>
                <p class="subtitulo-resumo" id="subtitulo-resumo">Resumo</p>
            </div>
            <div class="placar-circular">
                <svg viewBox="0 0 36 36" class="circular-chart">
                    <path class="circle-bg" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
                    <path class="circle" id="circle-path" stroke-dasharray="0, 100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
                    <text x="18" y="20.35" class="percentage" id="texto-percentual">0%</text>
                </svg>
            </div>
            <p id="msg-motivacional">Calculando...</p>
            <div class="stats-grid">
                <div class="stat-card verde">
                    <span class="stat-label">Acertos</span>
                    <span class="stat-valor" id="stat-acertos">0</span>
                </div>
                <div class="stat-card vermelho">
                    <span class="stat-label">Erros</span>
                    <span class="stat-valor" id="stat-erros">0</span>
                </div>
                <div class="stat-card azul">
                    <span class="stat-label">Total</span>
                    <span class="stat-valor" id="stat-total">0</span>
                </div>
            </div>
            <div class="ad-banner-container retangulo-medio"><p>Publicidade</p></div>
            <button id="btn-reiniciar" class="btn-menu azul">üîÑ Jogar Novamente</button>
            <button id="btn-home-resultado" class="btn-menu neutro">üè† Menu Inicial</button>
        </div>

    </div> <script src="audio.js"></script> 
    <script type="module" src="js/app.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('./service-worker.js')
                .then(() => console.log('Service Worker registrado!'))
                .catch((err) => console.error('Erro SW:', err));
        }
    </script>
</body>
</html>